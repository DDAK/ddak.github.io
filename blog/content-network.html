<!DOCTYPE html><html lang="en"><head><meta name="google-adsense-account" content="ca-pub-1570360577499483"/><link rel="shortcut icon" href="/favicon.ico"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="android-chrome-icon" sizes="512x512" href="/android-chrome-512x152.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><meta charSet="utf-8" class="jsx-19bb03d26fbdbce5"/><meta name="viewport" content="width=device-width, initial-scale=1" class="jsx-19bb03d26fbdbce5"/><meta name="description" content=" A Cost-Efficient and efficient CDN Approach to serving media content" class="jsx-19bb03d26fbdbce5"/><meta name="author" content="Dawood Khan" class="jsx-19bb03d26fbdbce5"/><meta name="keywords" content="AI,CDN,GLB,CDN,Routing" class="jsx-19bb03d26fbdbce5"/><meta property="og:title" content="CDN with On-Demand Image Resizing with Google Cloud- Dawood Khan" class="jsx-19bb03d26fbdbce5"/><meta property="og:description" content=" A Cost-Efficient and efficient CDN Approach to serving media content" class="jsx-19bb03d26fbdbce5"/><meta property="og:url" content="https://ddak.github.io/blog/content-network" class="jsx-19bb03d26fbdbce5"/><meta property="og:image" content="https://ddak.github.io/images/cdn/cdn.jpeg" class="jsx-19bb03d26fbdbce5"/><meta property="og:type" content="article" class="jsx-19bb03d26fbdbce5"/><meta property="og:article:publisher" content="https://ddak.github.io/" class="jsx-19bb03d26fbdbce5"/><meta property="og:site_name" content="Dawood Khan" class="jsx-19bb03d26fbdbce5"/><meta name="twitter:card" content="summary_large_image" class="jsx-19bb03d26fbdbce5"/><meta name="twitter:title" content="CDN with On-Demand Image Resizing with Google Cloud- Dawood Khan" class="jsx-19bb03d26fbdbce5"/><meta name="twitter:description" content=" A Cost-Efficient and efficient CDN Approach to serving media content" class="jsx-19bb03d26fbdbce5"/><meta name="twitter:url" content="https://ddak.github.io/blog/content-network" class="jsx-19bb03d26fbdbce5"/><meta name="twitter:site" content="@ddak_1980" class="jsx-19bb03d26fbdbce5"/><meta name="twitter:image" content="https://ddak.github.io/images/cdn/cdn.jpeg" class="jsx-19bb03d26fbdbce5"/><meta name="twitter:creator" content="@ddak_1980" class="jsx-19bb03d26fbdbce5"/><link rel="icon" href="/images/dawood.png?" class="jsx-19bb03d26fbdbce5"/><link rel="canonical" href="https://ddak.github.io/blog/content-network" class="jsx-19bb03d26fbdbce5"/><title class="jsx-19bb03d26fbdbce5">CDN with On-Demand Image Resizing with Google Cloud- Dawood Khan</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous" class="jsx-19bb03d26fbdbce5"/><meta name="next-head-count" content="30"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/9e0e2ab81a31ba1e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9e0e2ab81a31ba1e.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-055aca46d2f8ed72.js" defer=""></script><script src="/_next/static/chunks/framework-73e0958fa2c4ed8c.js" defer=""></script><script src="/_next/static/chunks/main-e8a8d63c547f4442.js" defer=""></script><script src="/_next/static/chunks/pages/_app-92a6f2bfa037d706.js" defer=""></script><script src="/_next/static/chunks/d9067523-818f09ba034540a2.js" defer=""></script><script src="/_next/static/chunks/110-d58c1299ee056712.js" defer=""></script><script src="/_next/static/chunks/759-0441b5fae265b85c.js" defer=""></script><script src="/_next/static/chunks/194-c2aa4423b9965023.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bid%5D-bcf637e84a61abea.js" defer=""></script><script src="/_next/static/QX5kkUq5KRA_IqJdqXI5B/_buildManifest.js" defer=""></script><script src="/_next/static/QX5kkUq5KRA_IqJdqXI5B/_ssgManifest.js" defer=""></script><style id="__jsx-2440573810">.tags.jsx-2440573810{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:1vw 5vw 1vw 5vw;background-color:#fffecb;border-bottom:5px solid #071013}.tag-link.jsx-2440573810{font-family:"Share Tech Mono",monospace;color:#1d2b35;margin:0 1em 0 1em;text-decoration:none;border-bottom:1px dashed #fb232e}.tag-link.jsx-2440573810:hover{background:#20a4f3;color:#fffecb;border-bottom:1px dashed #fffecb}.tag-link.jsx-2440573810:active{background:#fb232e}</style><style id="__jsx-2373724412">.header-container.jsx-2373724412{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding:10px 5vw;background:#4f759a}.header-left.jsx-2373724412{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;font-size:19px;color:#1717dd}.header-left.jsx-2373724412 a.jsx-2373724412{font-family:"Source Sans Pro",sans-serif;text-decoration:none;color:#ffaa33}img.jsx-2373724412{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;width:-webkit-calc(1.2rem + 1vw);width:-moz-calc(1.2rem + 1vw);width:calc(1.2rem + 1vw);max-width:-webkit-calc(1.2rem + 1vw);max-width:-moz-calc(1.2rem + 1vw);max-width:calc(1.2rem + 1vw);height:auto;margin:0 5px}img.jsx-2373724412:hover{cursor:pointer}.header-left.jsx-2373724412 a.jsx-2373724412:hover{color:#20a4f3}.header-left.jsx-2373724412 a.jsx-2373724412:active{color:#fb232e}.header-right.jsx-2373724412{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:3;-webkit-flex:3;-moz-box-flex:3;-ms-flex:3;flex:3;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;-moz-box-orient:horizontal;-moz-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;color:#1414d0;font-size:16px;padding-left:29px;margin-right:25px;margin-left:10px}.header.jsx-2373724412 .header-right.jsx-2373724412 a.jsx-2373724412{padding-left:35px}.header.jsx-2373724412 .header-right.jsx-2373724412 a.jsx-2373724412{padding:0 1vw;font-family:"Source Sans Pro",sans-serif;text-decoration:none;color:#ffaa33;padding-left:35px}.header.jsx-2373724412 .header-right.jsx-2373724412 a.jsx-2373724412:hover{color:#20a4f3;padding-left:35px}.header.jsx-2373724412 .header-right.jsx-2373724412 a.jsx-2373724412:active{color:#fb232e;padding-left:35px}.header-description.jsx-2373724412{padding:15px 5vw;background-color:#fffecb;font-family:"Source Sans Pro",sans-serif;color:#071013;text-align:center}.header-description.jsx-2373724412 p.jsx-2373724412{margin:0}@media screen and (max-width:920px){.header-container.jsx-2373724412{padding:10px 2vw}#name.jsx-2373724412{display:none}img.jsx-2373724412{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}}@media screen and (max-width:480px){.header-container.jsx-2373724412{padding:10px 2vw;overflow-x:scroll}}@media screen and (max-width:300px){img.jsx-2373724412{display:none}}</style><style id="__jsx-870580ea71b30c5e">.img-text.jsx-870580ea71b30c5e{display:block;text-align:center;font-family:"Source Sans Pro",sans-serif;font-size:-webkit-calc(.8rem + .1vw);font-size:-moz-calc(.8rem + .1vw);font-size:calc(.8rem + .1vw);color:#1d2b35;word-wrap:"break-word";overflow-wrap:"break-word"}a.jsx-870580ea71b30c5e{margin:0;text-decoration:none;color:#1d2b35;border-bottom:1px solid}</style><style id="__jsx-3778896617">.footer-container.jsx-3778896617{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;background:#1d2b35e6;padding:1vw 1vw 1vw 1vw}.footer-container-links.jsx-3778896617{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.footer-links.jsx-3778896617{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.link-item.jsx-3778896617{margin:0 1vw 0 1vw}.link.jsx-3778896617{text-decoration:none;cursor:pointer:
				background-color: yellow}.link.jsx-3778896617:hover{color:black}.copy-right-container.jsx-3778896617{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:10px}.copy-right-text.jsx-3778896617{font-family:"Maven Pro",sans-serif;font-size:-webkit-calc(.75rem + .1vw);font-size:-moz-calc(.75rem + .1vw);font-size:calc(.75rem + .1vw);color:#fffecb}</style><style id="__jsx-19bb03d26fbdbce5">.blog-content.jsx-19bb03d26fbdbce5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:100%;-webkit-flex:100%;-moz-box-flex:100%;-ms-flex:100%;flex:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin:1vw 25vw 1vw 25vw;width:50vw;max-width:50vw;min-height:90vh}@media screen and (max-width:980px){.blog-content.jsx-19bb03d26fbdbce5{margin:1vw 15vw 1vw 15vw;width:70vw;max-width:70vw}}@media screen and (max-width:760px){.blog-content.jsx-19bb03d26fbdbce5{margin:1vw 5vw 1vw 5vw;width:90vw;max-width:90vw}}</style><style data-href="https://fonts.googleapis.com/css2?family=Maven+Pro&family=Share+Tech+Mono&family=Source+Sans+Pro&family=Ubuntu&display=swap">@font-face{font-family:'Maven Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/mavenpro/v39/7Auup_AqnyWWAxW2Wk3swUz56MS91Eww8SX25nM.woff) format('woff')}@font-face{font-family:'Share Tech Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sharetechmono/v15/J7aHnp1uDWRBEqV98dVQztYldFc7pw.woff) format('woff')}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xK3dSBYKcSV-LCoeQqfX1RYOo3aPA.woff) format('woff')}@font-face{font-family:'Ubuntu';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgo6ew.woff) format('woff')}@font-face{font-family:'Maven Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/mavenpro/v39/7Auup_AqnyWWAxW2Wk3swUz56MS91Eww8SX21nijpBh8CvRBOB1s.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Maven Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/mavenpro/v39/7Auup_AqnyWWAxW2Wk3swUz56MS91Eww8SX21nmjpBh8CvRBOB1s.woff) format('woff');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Maven Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/mavenpro/v39/7Auup_AqnyWWAxW2Wk3swUz56MS91Eww8SX21nejpBh8CvRBOA.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Share Tech Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sharetechmono/v15/J7aHnp1uDWRBEqV98dVQztYldFcLowEFA87Heg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xK3dSBYKcSV-LCoeQqfX1RYOo3qNa7lujVj9_mf.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xK3dSBYKcSV-LCoeQqfX1RYOo3qPK7lujVj9_mf.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xK3dSBYKcSV-LCoeQqfX1RYOo3qNK7lujVj9_mf.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xK3dSBYKcSV-LCoeQqfX1RYOo3qO67lujVj9_mf.woff2) format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xK3dSBYKcSV-LCoeQqfX1RYOo3qN67lujVj9_mf.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xK3dSBYKcSV-LCoeQqfX1RYOo3qNq7lujVj9_mf.woff2) format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7lujVj9w.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Ubuntu';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKcg72nU6AF7xm.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Ubuntu';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKew72nU6AF7xm.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Ubuntu';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKcw72nU6AF7xm.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Ubuntu';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKfA72nU6AF7xm.woff2) format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:'Ubuntu';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKcQ72nU6AF7xm.woff2) format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Ubuntu';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKfw72nU6AFw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div style="min-height:100vh" class="jsx-19bb03d26fbdbce5"><div class="jsx-2373724412 header"><div class="jsx-2373724412 header-container"><div class="jsx-2373724412 header-left"><a href="/"><img alt="Logo" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" style="color:transparent" src="/images/dawood.png"/></a><a href="/">Dawood Khan</a></div><div class="jsx-2373724412 header-right"><a href="/about">About Me</a></div></div><div class="jsx-2373724412 header-description"><p class="jsx-2373724412">The idea-factory; my journey through technology landscape and entrepreneurship.</p></div><div style="display:none" class="jsx-2373724412"><div class="jsx-2440573810 tags"><a class="tag-link" href="/tags/ai">#ai</a><a class="tag-link" href="/tags/python">#python</a><a class="tag-link" href="/tags/go">#go</a><a class="tag-link" href="/tags/image-processing">#image-processing</a><a class="tag-link" href="/tags/opencv">#opencv</a><a class="tag-link" href="/tags/concurrency">#concurrency</a><a class="tag-link" href="/tags/python-performance">#python-performance</a><a class="tag-link" href="/tags/color-science">#color-science</a><a class="tag-link" href="/tags/react">#react</a><a class="tag-link" href="/tags/next-js">#next-js</a><a class="tag-link" href="/tags/flutter">#flutter</a></div></div></div><article class="jsx-19bb03d26fbdbce5 blog-content"><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word"><picture class="jsx-870580ea71b30c5e"><img src="/images/cdn/cdn.jpeg" alt="&quot;CDN with On-Demand Image Resizing on GCP&quot;" style="width:100%;max-width:100%;height:500px;margin-left:0%" class="jsx-870580ea71b30c5e"/><span class="jsx-870580ea71b30c5e img-text"></span></picture></p>
<h6 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#fb232e;margin:1vh 0 1vh 0;overflow-wrap:break-word" id="published-on-apr-11-2025">Published on: <strong style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;font-weight:bold;color:#1d2b35f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Apr 11, 2025</strong></h6>
<h1 style="font-family:&#x27;Ubuntu&#x27;, sans-serif;font-size:calc(1rem + 1.5vw);color:#1d2b35;margin:1vh 0 1vh 0;overflow-wrap:break-word" id="on-demand-image-resizing-with-google-cloud-a-cost-efficient-cdn-approach">On-Demand Image Resizing with Google Cloud: A Cost-Efficient CDN Approach</h1>
<h2 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 1vw);color:#1d2b35;margin:1vh 0 1vh 0;overflow-wrap:break-word" id="introduction">Introduction</h2>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">We needed to serve images to our frontend application. These images were in a GCS bucket. In addition, we needed to serve images of various resolutions and we didn&#x27;t want to store all image sizes in the bucket.  We chose to use a combo of CDN and load balancer on GCP to serve these images to the frontend. However, instead of storing all the variants of an image, we chose to generate resized versions on the fly when the frontend requests them--and cache those for performance and cost reasons.</p>
<h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;margin:1vh 0 1vh 0;overflow-wrap:break-word" id="requirements">Requirements:</h3>
<ol style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013e6;margin:1vh 0 1vh calc(2vw);overflow-wrap:break-word">
<li class="mb-2">Dynamically resizes images on demand</li>
<li class="mb-2">Caches generated sizes efficiently, to reduce compute costs</li>
<li class="mb-2">Integrates seamlessly with Google Cloud Platform (GCP) services</li>
</ol>
<h2 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 1vw);color:#1d2b35;margin:1vh 0 1vh 0;overflow-wrap:break-word" id="architecture-overview">Architecture Overview</h2>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Our final solution combined four key GCP services:</p>
<ol style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013e6;margin:1vh 0 1vh calc(2vw);overflow-wrap:break-word">
<li class="mb-2"><strong style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;font-weight:bold;color:#1d2b35f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Google Cloud CDN</strong>: Caches resized images at edge locations</li>
<li class="mb-2"><strong style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;font-weight:bold;color:#1d2b35f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Global Load Balancer (GLB)</strong>: Routes requests based on query parameters, between CDN and Cloud Run resizing services</li>
<li class="mb-2"><strong style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;font-weight:bold;color:#1d2b35f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Cloud Run</strong>: Stateless container for image processing</li>
<li class="mb-2"><strong style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;font-weight:bold;color:#1d2b35f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">GCS Bucket</strong>: Stores original high-resolution images</li>
</ol>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word"><picture class="jsx-870580ea71b30c5e"><img src="/images/cdn/arch.jpg" alt="&quot;CDN with On-Demand Image Resizing on GCP&quot;" style="width:100%;max-width:100%;height:500px;margin-left:0%" class="jsx-870580ea71b30c5e"/><span class="jsx-870580ea71b30c5e img-text"></span></picture></p>
<h2 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 1vw);color:#1d2b35;margin:1vh 0 1vh 0;overflow-wrap:break-word" id="implementation-walkthrough">Implementation Walkthrough</h2>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">General steps to follow for the implementation</p>
<ol style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013e6;margin:1vh 0 1vh calc(2vw);overflow-wrap:break-word">
<li class="mb-2">Deploy a resizing service (Cloud Function/Cloud Run) that takes parameters (e.g., image path, width, height) and returns the resized image.</li>
<li class="mb-2">Configure the Load Balancer&#x27;s backend service to point to this resizing service, and enable Cloud CDN on it.</li>
<li class="mb-2">Set up the route rules for URL Map structure so that requests for resized images include the parameters, like width and height.</li>
<li class="mb-2">The resizing service fetches the original image from GCS, resizes it, and returns it with appropriate Cache-Control headers so Cloud CDN caches it.</li>
<li class="mb-2">The CDN then serves subsequent requests for the same size from the cache.</li>
</ol>
<h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;margin:1vh 0 1vh 0;overflow-wrap:break-word" id="1-dynamic-resizing-service-cloud-run">1. Dynamic Resizing Service (Cloud Run)</h3>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">We chose Cloud Run over Cloud Functions for better control over containerization and longer request timeouts. The service uses Express.js and Sharp - a high-performance Node.js image processing library.</p>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word"><strong style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;font-weight:bold;color:#1d2b35f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Key features of the resizer:</strong></p>
<pre><div><pre style="color:#ccc;background:#2d2d2d;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-hljs txt" style="color:#ccc;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">1</span><span>const express = require(&#x27;express&#x27;); 
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">2</span>const sharp = require(&#x27;sharp&#x27;); 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">3</span>const { Storage } = require(&#x27;@google-cloud/storage&#x27;); 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">4</span>const storage = new Storage(); 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">5</span>const app = express(); 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">6</span>app.get(&#x27;/:filename&#x27;, async (req, res) =&gt; { 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">7</span>	const { filename } = req.params; 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">8</span>	const width = parseInt(req.query.width) || undefined; 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">9</span>	const height = parseInt(req.query.height) || undefined; 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">10</span>	try { 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">11</span>		const bucket = storage.bucket(&#x27;sb-listing-data&#x27;); 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">12</span>		const file = bucket.file(filename); 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">13</span>		const [exists] = await file.exists(); 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">14</span>		if (!exists) return res.status(404).send(&#x27;Not found&#x27;); 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">15</span>		
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">16</span>		const readStream = file.createReadStream(); 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">17</span>		let pipeline = sharp();
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">18</span>		if (width &gt; 2048 || height &gt; 2048) {
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">19</span>		     return res.status(400).send(&#x27;Maximum size 2048px&#x27;);
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">20</span>		} 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">21</span>		if (width &amp;&amp; height) { 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">22</span>			pipeline = pipeline.resize(width, height, { fit: &#x27;inside&#x27; }); 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">23</span>		} 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">24</span>		res.set(&#x27;Cache-Control&#x27;, &#x27;public, max-age=2629800&#x27;); // Cache for 1 month 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">25</span>		res.setHeader(&quot;content-type&quot;, &quot;image/jpeg&quot;);
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">26</span>		readStream.pipe(pipeline).pipe(res); 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">27</span>	} catch (error) { 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">28</span>		res.status(500).send(&#x27;Error processing image&#x27;); 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">29</span>	} 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">30</span>}); 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">31</span>exports.resizer=app;
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">32</span></code></pre></div></pre>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Critical caching headers ensure proper CDN behavior:</p>
<pre><div><pre style="color:#ccc;background:#2d2d2d;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-hljs txt" style="color:#ccc;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">1</span><span>res.set(&#x27;Cache-Control&#x27;, &#x27;public, max-age=2629800&#x27;); // 1 month
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">2</span>res.set(&#x27;Content-Type&#x27;, &#x27;image/jpeg&#x27;);
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">3</span>res.set(&#x27;Vary&#x27;, &#x27;Accept, Width, Height&#x27;); // Prevent parameter collisions
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">4</span></code></pre></div></pre>
<h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;margin:1vh 0 1vh 0;overflow-wrap:break-word" id="2-intelligent-routing-with-global-load-balancer">2. Intelligent Routing with Global Load Balancer</h3>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">The GLB&#x27;s URL Map routes requests based on query parameters:</p>
<pre><div><pre style="color:#ccc;background:#2d2d2d;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-hljs txt" style="color:#ccc;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">1</span><span>defaultService: projects/xyz/global/backendBuckets/cdn-fe 
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">2</span>name: url-map-query-params 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">3</span>routeRules: 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">4</span>- matchRules: 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">5</span>	- queryParameterMatches: 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">6</span>		- name: width 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">7</span>		  presentMatch: true 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">8</span>		- name: height 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">9</span>		  presentMatch: true 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">10</span>		pathTemplateMatch: /{filename=*} 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">11</span>	priority: 1 
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">12</span>	service: projects//global/backendServices/resizer
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">13</span></code></pre></div></pre>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word"><strong style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;font-weight:bold;color:#1d2b35f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Routing Logic:</strong></p>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">| Request Type               | Example URL                            | Destination       |
| -------------------------- | -------------------------------------- | ----------------- |
| With width &amp; height params | <em style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;background-color:#07101326;color:#071013f2;margin:0vh 0 1vh 0;padding:0 2px 0 2px;border-radius:2px">/images/cat.jpg?width=300&amp;height=200</em> | Cloud Run Resizer |
| All other requests         | <em style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;background-color:#07101326;color:#071013f2;margin:0vh 0 1vh 0;padding:0 2px 0 2px;border-radius:2px">/images/cat.jpg</em>                      | GCS Bucket        |</p>
<h2 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 1vw);color:#1d2b35;margin:1vh 0 1vh 0;overflow-wrap:break-word" id="some-other-considerations">Some other considerations</h2>
<ol style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013e6;margin:1vh 0 1vh calc(2vw);overflow-wrap:break-word">
<li class="mb-2">The resizing service should handle errors, like invalid sizes or missing images. Also, using a CDN requires setting proper cache headers. The service should return <div><pre style="color:#ccc;background:#2d2d2d;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-text" style="color:#ccc;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">1</span><span>Cache-Control: public, max-age=...</span></code></pre></div> so the CDN caches it.</li>
<li class="mb-2"><strong style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;font-weight:bold;color:#1d2b35f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Security</strong>: Ensure that the service can&#x27;t be abused to generate too many sizes, possibly adding rate limiting or size restrictions.</li>
<li class="mb-2"><strong style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;font-weight:bold;color:#1d2b35f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Cost</strong>: Processing images on demand with Cloud Run/Cloud Functions incur costs based on the number of requests and processing time. Caching with CDN reduces the number of times the backend is hit and avoids saving different images sizes.</li>
<li class="mb-2"><strong style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;font-weight:bold;color:#1d2b35f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Cache Invalidation</strong>: Implement versioned URLs (<em style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;background-color:#07101326;color:#071013f2;margin:0vh 0 1vh 0;padding:0 2px 0 2px;border-radius:2px">/v2/images/...</em>) to force CDN refresh when updating resizing logic.</li>
<li class="mb-2"><strong style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;font-weight:bold;color:#1d2b35f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Error Handling</strong>: Custom error pages prevent CDN caching of error states:<!-- -->
<pre><div><pre style="color:#ccc;background:#2d2d2d;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-hljs txt" style="color:#ccc;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">1</span><span>.on(&#x27;error&#x27;, (err) =&gt; {
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">2</span>  res.status(500).sendFile(&#x27;error500.jpg&#x27;);
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">3</span>});
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#999">4</span></code></pre></div></pre>
</li>
<li class="mb-2"><strong style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;font-weight:bold;color:#1d2b35f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Monitoring</strong>: Critical Cloud Monitoring metrics:<!-- -->
<ul class="list-disc list-inside my-4 ml-4">
<li class="mb-2">CDN Cache Hit Ratio</li>
<li class="mb-2">Resizer 5xx Errors</li>
<li class="mb-2">Backend Latency Percentiles</li>
</ul>
</li>
<li class="mb-2"><strong style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;font-weight:bold;color:#1d2b35f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Alternative Image Protocols</strong>, this example is limited to jpeg.<!-- -->
<ul class="list-disc list-inside my-4 ml-4">
<li class="mb-2">WebP/AVIF format support</li>
<li class="mb-2">Density-aware <em style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;background-color:#07101326;color:#071013f2;margin:0vh 0 1vh 0;padding:0 2px 0 2px;border-radius:2px">srcset</em> generation</li>
</ul>
</li>
<li class="mb-2"><strong style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;font-weight:bold;color:#1d2b35f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Auto-Cropping/watermark-removal/blurring etc</strong>, consider other applications using Cloud Vision API</li>
</ol>
<h2 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 1vw);color:#1d2b35;margin:1vh 0 1vh 0;overflow-wrap:break-word" id="conclusion">Conclusion</h2>
<p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">This architecture reduced our image storage costs by 70% while maintaining sub-200ms response times for cached assets.</p></article><div class="jsx-3778896617 footer-container"><div class="jsx-3778896617 footer-container-links"><div class="jsx-3778896617 footer-links"><div class="jsx-3778896617 link-item"><a href="https://github.com/ddak" rel="noreferrer" target=" _blank" class="jsx-3778896617 link"><div><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" style="color:#fffecb;font-size:calc(0.8rem + 1vw)" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a></div><div class="jsx-3778896617 link-item"><a href="https://www.linkedin.com/in/dawood-khan-phd/" rel="noreferrer" target="_blank" class="jsx-3778896617 link"><div><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" style="color:#fffecb;font-size:calc(0.8rem + 1vw)" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></div></a></div></div></div><div class="jsx-3778896617 copy-right-container"><p class="jsx-3778896617 copy-right-text">Dawood Khan  2024</p></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postMetadata":{"title":"CDN with On-Demand Image Resizing with Google Cloud","description":" A Cost-Efficient and efficient CDN Approach to serving media content","imgName":"cdn/cdn.jpeg","date":"Apr 11, 2025","tags":["GCP","CDN","Image Processing","Routing","Content Network"],"keywords":["AI","CDN","GLB","CDN","Routing"],"id":"content-network"},"postContent":{"compiledSource":"\"use strict\";\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = {\n    code: \"code\",\n    em: \"em\",\n    h1: \"h1\",\n    h2: \"h2\",\n    h3: \"h3\",\n    h6: \"h6\",\n    img: \"img\",\n    li: \"li\",\n    ol: \"ol\",\n    p: \"p\",\n    pre: \"pre\",\n    strong: \"strong\",\n    ul: \"ul\",\n    ..._provideComponents(),\n    ...props.components\n  };\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"cdn/cdn.jpeg\",\n        alt: \"\\\"CDN with On-Demand Image Resizing on GCP\\\"\"\n      })\n    }), \"\\n\", _jsxs(_components.h6, {\n      id: \"published-on-apr-11-2025\",\n      children: [\"Published on: \", _jsx(_components.strong, {\n        children: \"Apr 11, 2025\"\n      })]\n    }), \"\\n\", _jsx(_components.h1, {\n      id: \"on-demand-image-resizing-with-google-cloud-a-cost-efficient-cdn-approach\",\n      children: \"On-Demand Image Resizing with Google Cloud: A Cost-Efficient CDN Approach\"\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"introduction\",\n      children: \"Introduction\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"We needed to serve images to our frontend application. These images were in a GCS bucket. In addition, we needed to serve images of various resolutions and we didn't want to store all image sizes in the bucket.  We chose to use a combo of CDN and load balancer on GCP to serve these images to the frontend. However, instead of storing all the variants of an image, we chose to generate resized versions on the fly when the frontend requests them--and cache those for performance and cost reasons.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"requirements\",\n      children: \"Requirements:\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Dynamically resizes images on demand\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Caches generated sizes efficiently, to reduce compute costs\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Integrates seamlessly with Google Cloud Platform (GCP) services\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"architecture-overview\",\n      children: \"Architecture Overview\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Our final solution combined four key GCP services:\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Google Cloud CDN\"\n        }), \": Caches resized images at edge locations\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Global Load Balancer (GLB)\"\n        }), \": Routes requests based on query parameters, between CDN and Cloud Run resizing services\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Cloud Run\"\n        }), \": Stateless container for image processing\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"GCS Bucket\"\n        }), \": Stores original high-resolution images\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"cdn/arch.jpg\",\n        alt: \"\\\"CDN with On-Demand Image Resizing on GCP\\\"\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"implementation-walkthrough\",\n      children: \"Implementation Walkthrough\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"General steps to follow for the implementation\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Deploy a resizing service (Cloud Function/Cloud Run) that takes parameters (e.g., image path, width, height) and returns the resized image.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Configure the Load Balancer's backend service to point to this resizing service, and enable Cloud CDN on it.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Set up the route rules for URL Map structure so that requests for resized images include the parameters, like width and height.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"The resizing service fetches the original image from GCS, resizes it, and returns it with appropriate Cache-Control headers so Cloud CDN caches it.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"The CDN then serves subsequent requests for the same size from the cache.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"1-dynamic-resizing-service-cloud-run\",\n      children: \"1. Dynamic Resizing Service (Cloud Run)\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"We chose Cloud Run over Cloud Functions for better control over containerization and longer request timeouts. The service uses Express.js and Sharp - a high-performance Node.js image processing library.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.strong, {\n        children: \"Key features of the resizer:\"\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-txt\",\n        children: \"const express = require('express'); \\nconst sharp = require('sharp'); \\nconst { Storage } = require('@google-cloud/storage'); \\nconst storage = new Storage(); \\nconst app = express(); \\napp.get('/:filename', async (req, res) =\u003e { \\n\\tconst { filename } = req.params; \\n\\tconst width = parseInt(req.query.width) || undefined; \\n\\tconst height = parseInt(req.query.height) || undefined; \\n\\ttry { \\n\\t\\tconst bucket = storage.bucket('sb-listing-data'); \\n\\t\\tconst file = bucket.file(filename); \\n\\t\\tconst [exists] = await file.exists(); \\n\\t\\tif (!exists) return res.status(404).send('Not found'); \\n\\t\\t\\n\\t\\tconst readStream = file.createReadStream(); \\n\\t\\tlet pipeline = sharp();\\n\\t\\tif (width \u003e 2048 || height \u003e 2048) {\\n\\t\\t     return res.status(400).send('Maximum size 2048px');\\n\\t\\t} \\n\\t\\tif (width \u0026\u0026 height) { \\n\\t\\t\\tpipeline = pipeline.resize(width, height, { fit: 'inside' }); \\n\\t\\t} \\n\\t\\tres.set('Cache-Control', 'public, max-age=2629800'); // Cache for 1 month \\n\\t\\tres.setHeader(\\\"content-type\\\", \\\"image/jpeg\\\");\\n\\t\\treadStream.pipe(pipeline).pipe(res); \\n\\t} catch (error) { \\n\\t\\tres.status(500).send('Error processing image'); \\n\\t} \\n}); \\nexports.resizer=app;\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Critical caching headers ensure proper CDN behavior:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-txt\",\n        children: \"res.set('Cache-Control', 'public, max-age=2629800'); // 1 month\\nres.set('Content-Type', 'image/jpeg');\\nres.set('Vary', 'Accept, Width, Height'); // Prevent parameter collisions\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"2-intelligent-routing-with-global-load-balancer\",\n      children: \"2. Intelligent Routing with Global Load Balancer\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The GLB's URL Map routes requests based on query parameters:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-txt\",\n        children: \"defaultService: projects/xyz/global/backendBuckets/cdn-fe \\nname: url-map-query-params \\nrouteRules: \\n- matchRules: \\n\\t- queryParameterMatches: \\n\\t\\t- name: width \\n\\t\\t  presentMatch: true \\n\\t\\t- name: height \\n\\t\\t  presentMatch: true \\n\\t\\tpathTemplateMatch: /{filename=*} \\n\\tpriority: 1 \\n\\tservice: projects//global/backendServices/resizer\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.strong, {\n        children: \"Routing Logic:\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"| Request Type               | Example URL                            | Destination       |\\n| -------------------------- | -------------------------------------- | ----------------- |\\n| With width \u0026 height params | \", _jsx(_components.em, {\n        children: \"/images/cat.jpg?width=300\u0026height=200\"\n      }), \" | Cloud Run Resizer |\\n| All other requests         | \", _jsx(_components.em, {\n        children: \"/images/cat.jpg\"\n      }), \"                      | GCS Bucket        |\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"some-other-considerations\",\n      children: \"Some other considerations\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"The resizing service should handle errors, like invalid sizes or missing images. Also, using a CDN requires setting proper cache headers. The service should return \", _jsx(_components.code, {\n          children: \"Cache-Control: public, max-age=...\"\n        }), \" so the CDN caches it.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Security\"\n        }), \": Ensure that the service can't be abused to generate too many sizes, possibly adding rate limiting or size restrictions.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Cost\"\n        }), \": Processing images on demand with Cloud Run/Cloud Functions incur costs based on the number of requests and processing time. Caching with CDN reduces the number of times the backend is hit and avoids saving different images sizes.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Cache Invalidation\"\n        }), \": Implement versioned URLs (\", _jsx(_components.em, {\n          children: \"/v2/images/...\"\n        }), \") to force CDN refresh when updating resizing logic.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Error Handling\"\n        }), \": Custom error pages prevent CDN caching of error states:\", \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"hljs language-txt\",\n            children: \".on('error', (err) =\u003e {\\n  res.status(500).sendFile('error500.jpg');\\n});\\n\"\n          })\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Monitoring\"\n        }), \": Critical Cloud Monitoring metrics:\", \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsx(_components.li, {\n            children: \"CDN Cache Hit Ratio\"\n          }), \"\\n\", _jsx(_components.li, {\n            children: \"Resizer 5xx Errors\"\n          }), \"\\n\", _jsx(_components.li, {\n            children: \"Backend Latency Percentiles\"\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Alternative Image Protocols\"\n        }), \", this example is limited to jpeg.\", \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsx(_components.li, {\n            children: \"WebP/AVIF format support\"\n          }), \"\\n\", _jsxs(_components.li, {\n            children: [\"Density-aware \", _jsx(_components.em, {\n              children: \"srcset\"\n            }), \" generation\"]\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Auto-Cropping/watermark-removal/blurring etc\"\n        }), \", consider other applications using Cloud Vision API\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"conclusion\",\n      children: \"Conclusion\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This architecture reduced our image storage costs by 70% while maintaining sub-200ms response times for cached assets.\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = {\n    ..._provideComponents(),\n    ...props.components\n  };\n  return MDXLayout ? _jsx(MDXLayout, {\n    ...props,\n    children: _jsx(_createMdxContent, {\n      ...props\n    })\n  }) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}},"id":"content-network"},"__N_SSG":true},"page":"/blog/[id]","query":{"id":"content-network"},"buildId":"QX5kkUq5KRA_IqJdqXI5B","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>